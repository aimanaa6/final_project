{% extends "layout.html" %}

{% block title %}Community - Bakery Website{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="text-center mb-4">
        <h1 class="display-5 fw-bold text-primary">KAASP Community</h1>
        <p class="lead text-muted">Explore recipes, events, and creative vibes shared by our amazing bakery fam!</p>
        <button type="button" class="btn btn-warning btn-lg fw-bold shadow-sm mt-3" data-bs-toggle="modal" data-bs-target="#discountsModal" style="font-size: 1.2rem; padding: 1rem 2rem; background-color: #f06292; border: none; color: white; border-radius: 0.375rem;">
            View This Week's Sweet Deals!
        </button>
    </div>

    <!-- Upcoming Events Section -->
    <section class="events mb-5">
        <h2 class="h4 text-uppercase fw-semibold border-bottom pb-2 mb-3 text-center" style="color: #c2185b;">
            Upcoming Events
        </h2>
        <div class="card shadow-lg border-0 position-relative text-white overflow-hidden">
            <img src="{{ url_for('static', filename='images/opening.png') }}"
                 class="img-fluid w-100"
                 style="height: 500px; object-fit: cover; filter: brightness(70%);"
                 alt="May Opening in London">
            <div class="card-img-overlay d-flex flex-column justify-content-center align-items-center text-center">
                <h5 class="display-6 fw-bold text-white">May Opening of Our Next Location in London</h5>
                <p class="lead text-white">Join us for the secret unveiling of our newest spot in London! More details coming soon. Stay tuned!</p>
                <span class="badge bg-light text-dark fs-6 mt-2">New!</span>
            </div>
        </div>
    </section>

    <!-- Recipes Carousel Section -->
    <section class="recipe-carousel mb-5">
        <h2 class="h4 text-uppercase fw-semibold border-bottom pb-2 mb-2 text-center" style="color: #c2185b;">
            Community Recipes
        </h2>
        <p class="text-center text-muted mb-4">
            Want to see your recipe here? <a href="{{ url_for('contact') }}" class="text-decoration-none fw-bold" style="color: #f06292;">Contact us</a> to submit it!
        </p>

        <div id="recipeCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">

                {% set recipes = [
                    {'id': 1, 'title': 'Chunky, Fluffy Orange Challah Bread', 'img': 'orange_challah.jpg', 'desc': 'Amanda’s turmeric-powered bread recipe.', 'community': True},
                    {'id': 2, 'title': 'Dreamy Blue Latte', 'img': 'blue_latte.jpg', 'desc': 'A calming butterfly pea flower latte.', 'community': False},
                    {'id': 3, 'title': 'Green Swirly Cookie', 'img': 'green_cookie.jpg', 'desc': 'Matcha meets vanilla in this fun treat.', 'community': True},
                    {'id': 4, 'title': 'Red Chocolate Cake', 'img': 'red_chocolate_cake.jpg', 'desc': 'Decadent cocoa with a cherry twist.', 'community': False},
                    {'id': 5, 'title': 'Pink Glazed Donut', 'img': 'pink_donut.jpg', 'desc': 'Sweet, soft, and just the right amount of sparkle.', 'community': True}
                ] %}

                {% for recipe in recipes %}
                <div class="carousel-item {% if loop.first %}active{% endif %}">
                    <div class="card mx-auto shadow-sm border-0" style="width: 75%;" data-bs-toggle="modal" data-bs-target="#modal{{ recipe.id }}">
                        <img src="{{ url_for('static', filename='images/' ~ recipe.img) }}" class="card-img-top" alt="{{ recipe.title }}">
                        <div class="card-body text-center">
                            <h5 class="card-title">{{ recipe.title }}</h5>
                            <p class="card-text text-muted">{{ recipe.desc }}</p>
                            {% if recipe.community %}
                            <span class="badge bg-success">Submitted by our community members!</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}

            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#recipeCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#recipeCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
            </button>
        </div>
    </section>

    <!-- Recipe Modals -->
    {% for recipe in recipes %}
    <div class="modal fade" id="modal{{ recipe.id }}" tabindex="-1" aria-labelledby="modal{{ recipe.id }}Label" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modal{{ recipe.id }}Label">{{ recipe.title }}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h6>Steps:</h6>
                    <ol>
                        <li>Gather your ingredients and preheat the oven or prep your workspace.</li>
                        <li>Mix dry ingredients together in a large bowl.</li>
                        <li>Whisk wet ingredients in a separate bowl until well combined.</li>
                        <li>Slowly incorporate the wet mixture into the dry ingredients.</li>
                        <li>Mix until a uniform dough/batter forms (adjust texture if needed).</li>
                        <li>Shape, pour, roll, or prepare the mixture as required by the recipe.</li>
                        <li>Let the dough/batter rest, rise, or chill as appropriate.</li>
                        <li>Place into baking dish, tray, fryer, or serving glass.</li>
                        <li>Bake, fry, chill, or stir until done (follow timing for your recipe).</li>
                        <li>Finish with garnishes, frostings, glazes, or presentation flair!</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}

    <!-- Discounts Modal -->
    <div class="modal fade" id="discountsModal" tabindex="-1" aria-labelledby="discountsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header bg-warning text-dark">
                    <h5 class="modal-title fw-bold" id="discountsModalLabel">This Week's Deals!</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body bg-light">
                    <div class="row g-4">
                        <div class="col-md-6">
                            <div class="card shadow-lg border-0 h-100">
                                <img src="{{ url_for('static', filename='images/pink_croissant.jpg') }}" class="card-img-top" alt="Pink Baked Goods Discount">
                                <div class="card-body">
                                    <h5 class="card-title fw-bold" style="color: #d63384;">25% Off Pink Baked Goods</h5>
                                    <p class="card-text">Celebrate love and sweetness with our pink-themed delights! Enjoy 25% off on everything from beet puff pastries to rose cupcakes, with code PINKY25.</p>
                                    <span class="badge bg-danger">Limited Time</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card shadow-lg border-0 h-100">
                                <img src="{{ url_for('static', filename='images/red_velvet_cupcake.jpg') }}" class="card-img-top" alt="Red Baked Goods Discount">
                                <div class="card-body">
                                    <h5 class="card-title fw-bold text-danger">25% Off Red Baked Goods</h5>
                                    <p class="card-text">Treat yourself with our bold red delights—like red velvet cake and ruby chocolate cookies. Now 25% off for a limited time, when you quote REDDY25!</p>
                                    <span class="badge bg-danger">Hot Deal</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
{% endblock %}
